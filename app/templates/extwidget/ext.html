 {% extends "base.html" %}
 {% import "bootstrap/wtf.html" as wtf %}

 {% block title %}Ext widget forms{% endblock %}

 {% block page_content %}
 <div class="page-header">
     <h1>Ext widget</h1>
  </div>
  <div class="col-md-4">
      {{ wtf.quick_form(form) }}
 <div class="mango-callback"
      data-settings='{"type":"", "id": "MTAwMDY2MjQ=","autoDial" : "0", "lang" : "ru-ru", "host":"dev-ru.ics-dev-node1.ru.mgo.su/", "errorMessage": "В данный момент наблюдаются технические проблемы и совершение звонка невозможно"}'>
    </div>
        <script>
            !function(t)
            {
                function e()
                {
                    i = document.querySelectorAll(".button-widget-open");
                    for(var e = 0; e < i.length; ++e)
                        "true" != i[e].getAttribute("init")
                        && ( options = JSON.parse(i[e].closest('.' + t).getAttribute("data-settings")),
                             i[e].setAttribute("onclick", "alert('" + options.errorMessage + "(0000)'); return false;"))
                }
                function o(t,e,o,n,i,r)
                {
                    var s = document.createElement(t);
                    for(var a in e)
                        s.setAttribute(a, e[a]);
                    s.readyState ? s.onreadystatechange = o : (s.onload = n, s.onerror = i), r(s)
                }
                function n()
                {
                    for(var t = 0; t < i.length; ++t)
                    {
                        var e=i[t];
                        if("true" != e.getAttribute("init"))
                        {
                            options = JSON.parse(e.getAttribute("data-settings"));
                            var o = new MangoWidget( {host:window.location.protocol +'//'+ options.host,id:options.id, elem:e, message:options.errorMessage} );
                            o.initWidget(), e.setAttribute("init","true"), i[t].setAttribute("onclick","")
                        }
                    }
                }
                host = window.location.protocol + "//dev-ru.ics-dev-node1.ru.mgo.su/";
                var i = document.getElementsByClassName(t);
                o("link",
                        {rel:"stylesheet", type:"text/css", href:host + "css/widget-button.css"}, function(){}, function(){}, e, function(t) {document.documentElement.insertBefore(t,document.documentElement.firstChild)
                        }),
                o("script",{type:"text/javascript",src:host+"widgets/mango-callback.js"},function(){("complete"==this.readyState||"loaded"==this.readyState)&&n()},n,e,function(t){document.documentElement.appendChild(t)})
            }
            ("mango-callback");
        </script>
    </div>
{% endblock %}


